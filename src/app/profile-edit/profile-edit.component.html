<!-- <p>profile-edit works!</p> -->

<mat-sidenav-container class="sidenav-container">
  <mat-sidenav mode="side" opened class="sidenav" fixedInViewport>
    <mat-toolbar color="primary">iTest</mat-toolbar>
    <mat-nav-list>
      <a mat-list-item routerLink="/dashboard" routerLinkActive="active">Dashboard</a>
      <a mat-list-item routerLink="/quiz" routerLinkActive="active">Quiz</a>
    </mat-nav-list>
  </mat-sidenav>

  <mat-sidenav-content>
    <mat-toolbar color="primary" class="top-toolbar fixed-toolbar">
      <span class="header-title">Edit Profile</span>
      <span class="spacer"></span>
      <button mat-button [matMenuTriggerFor]="profileMenu">
        <mat-icon>account_circle</mat-icon> Admin
      </button>
      <mat-menu #profileMenu="matMenu">
        <button mat-menu-item><mat-icon>edit</mat-icon> Edit Profile</button>
        <button mat-menu-item><mat-icon>logout</mat-icon> Logout</button>
      </mat-menu>
    </mat-toolbar>

    <div class="main-content">
      <mat-card class="profile-card">
        <div class="profile-layout">
          <div class="profile-image-container">
            <img src="https://upload.wikimedia.org/wikipedia/commons/a/ac/Default_pfp.jpg" alt="Profile Photo" class="profile-image" />
          </div>

          <form #profileForm="ngForm" (ngSubmit)="onSubmit(profileForm)" class="profile-form">
            <h2>Edit Profile</h2>

            <!-- Email (Disabled) -->
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Email</mat-label>
              <input matInput [value]="profileData.email" disabled />
            </mat-form-field>

            <!-- Full Name (No digits) -->
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Full Name</mat-label>
              <input
                matInput
                type="text"
                name="name"
                required
                pattern="^[a-zA-Z ]+$"
                [(ngModel)]="profileData.name"
                #nameRef="ngModel"
              />
              <mat-error *ngIf="nameRef.errors?.['required'] && nameRef.touched">Name is required</mat-error>
              <mat-error *ngIf="nameRef.errors?.['pattern'] && nameRef.touched">Only alphabets allowed</mat-error>
            </mat-form-field>

            <!-- Mobile (10 digit) -->
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Mobile Number</mat-label>
              <input
                matInput
                type="tel"
                name="mobile"
                required
                pattern="^[0-9]{10}$"
                maxlength="10"
                minlength="10"
                [(ngModel)]="profileData.mobile"
                #mobileRef="ngModel"
              />
              <mat-error *ngIf="mobileRef.errors?.['required'] && mobileRef.touched">Mobile is required</mat-error>
              <mat-error *ngIf="mobileRef.errors?.['pattern'] && mobileRef.touched">Enter 10-digit mobile number</mat-error>
            </mat-form-field>

            <!-- Country -->
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Country</mat-label>
              <input
                matInput
                type="text"
                name="country"
                required
                [(ngModel)]="profileData.country"
                #countryRef="ngModel"
              />
              <mat-error *ngIf="countryRef.errors?.['required'] && countryRef.touched">Country is required</mat-error>
            </mat-form-field>

            <!-- Gender Dropdown -->
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Gender</mat-label>
              <mat-select
                name="gender"
                required
                [(ngModel)]="profileData.gender"
                #genderRef="ngModel"
              >
                <mat-option value="Male">Male</mat-option>
                <mat-option value="Female">Female</mat-option>
                <mat-option value="Other">Other</mat-option>
              </mat-select>
              <mat-error *ngIf="genderRef.errors?.['required'] && genderRef.touched">Gender is required</mat-error>
            </mat-form-field>

            <!-- Submit Button -->
            <button mat-raised-button color="primary" type="submit" [disabled]="!profileForm.valid">
              Update Profile
            </button>
          </form>
        </div>
      </mat-card>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
